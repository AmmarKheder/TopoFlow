#!/usr/bin/env python3
"""
Calculer le nombre d'ordres de scanning possibles avec wind scanning
"""
import math

print("="*100)
print("WIND SCANNING : CALCUL DES ORDRES POSSIBLES")
print("="*100)

# Configuration actuelle
img_size = (128, 256)
patch_size = 2
num_sectors = 16

# Grille de patches
grid_h = img_size[0] // patch_size
grid_w = img_size[1] // patch_size
num_patches = grid_h * grid_w

print(f"\nüìê Configuration:")
print(f"   Image size: {img_size[0]}√ó{img_size[1]}")
print(f"   Patch size: {patch_size}√ó{patch_size}")
print(f"   Grid patches: {grid_h}√ó{grid_w} = {num_patches} patches")

# R√©gions pour scanning r√©gional
regions_h = 32
regions_w = 32
total_regions = regions_h * regions_w

print(f"\nüó∫Ô∏è  R√©gions (pour scanning r√©gional):")
print(f"   Regions: {regions_h}√ó{regions_w} = {total_regions} r√©gions")
print(f"   Patches par r√©gion: {grid_h//regions_h}√ó{grid_w//regions_w} = {(grid_h//regions_h)*(grid_w//regions_w)} patches/r√©gion")

# Wind sectors
print(f"\nüå¨Ô∏è  Wind Sectors:")
print(f"   Nombre de secteurs: {num_sectors}")
print(f"   Angle par secteur: {360/num_sectors}¬∞")
print(f"   Secteurs:")
for i in range(num_sectors):
    angle = (360 * i / num_sectors)
    direction = ""
    if angle == 0: direction = "‚Üí Est"
    elif angle == 45: direction = "‚Üó Nord-Est"
    elif angle == 90: direction = "‚Üë Nord"
    elif angle == 135: direction = "‚Üñ Nord-Ouest"
    elif angle == 180: direction = "‚Üê Ouest"
    elif angle == 225: direction = "‚Üô Sud-Ouest"
    elif angle == 270: direction = "‚Üì Sud"
    elif angle == 315: direction = "‚Üò Sud-Est"
    print(f"      Secteur {i:2d}: {angle:6.1f}¬∞ {direction}")

print(f"\n" + "="*100)
print("NOMBRE D'ORDRES DE SCANNING POSSIBLES")
print("="*100)

print(f"\n1Ô∏è‚É£  GLOBAL SCANNING (toute la grille)")
print(f"   - {num_sectors} ordres pr√©-calcul√©s (un par secteur)")
print(f"   - Chaque batch: 1 secteur choisi selon vent moyen")
print(f"   - Ordre total: {num_patches} patches")

print(f"\n2Ô∏è‚É£  REGIONAL SCANNING (32√ó32 r√©gions)")
print(f"   - {total_regions} r√©gions √ó {num_sectors} secteurs = {total_regions * num_sectors} ordres pr√©-calcul√©s")
print(f"   - Chaque r√©gion choisit son secteur selon vent local")
print(f"   - Ordre total: {num_patches} patches (assembl√©s depuis {total_regions} r√©gions)")

print(f"\n3Ô∏è‚É£  ORDRES UNIQUES POSSIBLES")
print(f"   ")
print(f"   Global scanning:")
print(f"      ‚Üí {num_sectors} ordres distincts")
print(f"   ")
print(f"   Regional scanning:")
print(f"      ‚Üí {num_sectors}^{total_regions} combinaisons th√©oriques")
print(f"      ‚Üí {num_sectors}**{total_regions} = √âNORME (impossible √† √©num√©rer)")
print(f"      ‚Üí En pratique: vent voisin coh√©rent ‚Üí ~{num_sectors*10}-{num_sectors*100} ordres r√©alistes")

print(f"\n" + "="*100)
print("COMPARAISON AVEC AUTRES M√âTHODES")
print("="*100)

methods = [
    ("Row-major (ClimaX baseline)", 1, "Ligne par ligne, toujours le m√™me"),
    ("Hilbert curve", 1, "Courbe espace-filling, toujours le m√™me"),
    ("Global wind scanning", num_sectors, f"{num_sectors} directions de vent"),
    ("Regional wind scanning", "~200-1600", "Vent local par r√©gion (32√ó32)"),
]

print(f"\n{'M√©thode':<35s} {'Ordres possibles':<20s} {'Description':<40s}")
print("-"*100)
for method, count, desc in methods:
    print(f"{method:<35s} {str(count):<20s} {desc:<40s}")

print(f"\n" + "="*100)
print("AVANTAGES DU WIND SCANNING")
print("="*100)

print(f"""
‚úÖ Global scanning ({num_sectors} ordres):
   - Capture la direction dominante du vent
   - Suit le transport de pollution √† grande √©chelle
   - Simple et efficace

‚úÖ‚úÖ Regional scanning (~{num_sectors*10}-{num_sectors*100} ordres):
   - Capture les vents locaux (brises, topographie)
   - Adaptatif : chaque r√©gion suit son propre vent
   - Tr√®s expressif : {total_regions} r√©gions √ó {num_sectors} secteurs

üéØ Comparaison:
   - ClimaX baseline: 1 ordre ‚Üí ignore le vent
   - TopoFlow: ~{num_sectors*50} ordres ‚Üí suit le vent local !
""")

print("="*100)
print("CONCLUSION")
print("="*100)

print(f"""
Avec votre configuration actuelle ({grid_h}√ó{grid_w} patches, {num_sectors} secteurs):

üìä Ordres de scanning possibles:
   - Baseline (row-major): 1
   - Global wind scanning: {num_sectors}
   - Regional wind scanning: ~{num_sectors*10}-{num_sectors*100} (pratique)
   - Th√©orique maximal: {num_sectors}^{total_regions} (astronomique)

üå¨Ô∏è  Le wind scanning est donc {num_sectors}√ó-{num_sectors*50}√ó plus expressif que le baseline!
""")

print("="*100)
